{
    "version": "https://jsonfeed.org/version/1",
    "title": "Eruã®å…”å½çª â€¢ All posts by \"node\" tag",
    "description": "å˜¤å˜¤å˜¤~",
    "home_page_url": "https://eruihniyhbkbnf.github.io/blog",
    "items": [
        {
            "id": "https://eruihniyhbkbnf.github.io/blog/2022/11/04/Node-C-addons%E5%88%9D%E6%8E%A2/",
            "url": "https://eruihniyhbkbnf.github.io/blog/2022/11/04/Node-C-addons%E5%88%9D%E6%8E%A2/",
            "title": "Node C++ addonsåˆæ¢",
            "date_published": "2022-11-04T05:00:23.000Z",
            "content_html": "<p>å‘ç°äº†ä¸ªå¥½ç©çš„ä¸œè¥¿ï¼Œæ¥å­¦ä¸€æ‰‹ï¼ˆå®é™…ä¸Šå°±æ˜¯è·Ÿæ–‡æ¡£éšä¾¿è¿‡ä¸€ä¸‹å†æ‹¿ä¸­æ–‡éšä¾¿è®°å½•ä¸€ä¸‹ï¼‰ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ub2RlanMub3JnL2Rpc3QvbGF0ZXN0LXYxOC54L2RvY3MvYXBpL2FkZG9ucy5odG1s\">https://nodejs.org/dist/latest-v18.x/docs/api/addons.html</span></p>\n<blockquote>\n<p><em>Addons</em> are dynamically-linked shared objects written in C++. The  <code>require()</code>  function can load addons as ordinary Node.js modules. Addons provide an interface between JavaScript and C/C++ libraries.</p>\n</blockquote>\n<p>å…±äº«æ¨¡å—ï¼Œä¸€çœ¼çœ‹ä¸Šå»å¥½åƒ wasm çš„è¯´ |ï½¥Ï‰ï½¥ï½€)</p>\n<p>ä½¿ç”¨ C++ ç¼–å†™æºç ï¼Œç¼–è¯‘æˆ <code>addon.node</code>  è¿™æ ·çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¾› node è°ƒç”¨ã€‚</p>\n<p>ä¼¼ä¹è¦å…ˆé¢ç†Ÿä¸€äº›ä¸œè¥¿ï¼š</p>\n<ul>\n<li>\n<p>V8ï¼šnode ç”¨æ¥æ‰§è¡Œ js çš„ C++ åº“ï¼ŒèŒæ–°é˜¶æ®µå°±å¬è¯´çš„ç‰›é€¼ç©æ„å„¿ QwQ</p>\n</li>\n<li>\n<p>libuvï¼šç”¨æ¥å®ç° node çš„ event loop, worker, asynchronous çš„ C++ åº“</p>\n<ul>\n<li>\n<blockquote>\n<p>Addon authors should avoid blocking the event loop with I/O or other time-intensive tasks by offloading work via libuv to non-blocking system operations, worker threads, or a custom use of libuv threads.</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li>\n<p>Internal Node.js librariesï¼šnode è‡ªèº«æä¾›ä¸€äº› addon å¯ä»¥ä½¿ç”¨çš„ C++ APIï¼Œæœ€é‡è¦æ¯”å¦‚ <code>node::ObjectWrap</code></p>\n</li>\n<li>\n<p>åªæœ‰  <code>libuv, OpenSSL, V8, and zlib symbols</code>  è¢« node é‡æ–°æš´éœ²å‡ºæ¥ï¼Œå…¶ä»–ä¼¼ä¹è¦æ‰‹åŠ¨é“¾æ¥ qwq</p>\n</li>\n</ul>\n<h2 id=\"ç¼–å†™hello-world\"><a class=\"markdownIt-Anchor\" href=\"#ç¼–å†™hello-world\">#</a> ç¼–å†™ Hello World</h2>\n<p>å…ˆè·Ÿå®˜ç½‘æ¥ç²˜ä¸€ä»½ä»£ç ï¼š</p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// hello.cc</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;node.h></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">namespace</span> demo</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">using</span> v8<span class=\"token operator\">::</span>FunctionCallbackInfo<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">using</span> v8<span class=\"token operator\">::</span>Isolate<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token keyword\">using</span> v8<span class=\"token operator\">::</span>Local<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">using</span> v8<span class=\"token operator\">::</span>Object<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">using</span> v8<span class=\"token operator\">::</span>String<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token keyword\">using</span> v8<span class=\"token operator\">::</span>Value<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token keyword\">void</span> <span class=\"token function\">Method</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> FunctionCallbackInfo<span class=\"token operator\">&lt;</span>Value<span class=\"token operator\">></span> <span class=\"token operator\">&amp;</span>args<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    Isolate <span class=\"token operator\">*</span>isolate <span class=\"token operator\">=</span> args<span class=\"token punctuation\">.</span><span class=\"token function\">GetIsolate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    args<span class=\"token punctuation\">.</span><span class=\"token function\">GetReturnValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">Set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token operator\">::</span><span class=\"token function\">NewFromUtf8</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                                  isolate<span class=\"token punctuation\">,</span> <span class=\"token string\">\"world\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                                  <span class=\"token punctuation\">.</span><span class=\"token function\">ToLocalChecked</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token keyword\">void</span> <span class=\"token function\">Initialize</span><span class=\"token punctuation\">(</span>Local<span class=\"token operator\">&lt;</span>Object<span class=\"token operator\">></span> exports<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token function\">NODE_SET_METHOD</span><span class=\"token punctuation\">(</span>exports<span class=\"token punctuation\">,</span> <span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span> Method<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token function\">NODE_MODULE</span><span class=\"token punctuation\">(</span>NODE_GYP_MODULE_NAME<span class=\"token punctuation\">,</span> Initialize<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">&#125;</span> <span class=\"token comment\">// namespace demo</span></pre></td></tr></table></figure><p>æ‰€æœ‰ node addon å¿…é¡»åƒè¿™æ ·æš´éœ²ä¸€ä¸ªåˆå§‹åŒ–å‡½æ•°ï¼š</p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">Initialize</span><span class=\"token punctuation\">(</span>Local<span class=\"token operator\">&lt;</span>Object<span class=\"token operator\">></span> exports<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">NODE_MODULE</span><span class=\"token punctuation\">(</span>NODE_GYP_MODULE_NAME<span class=\"token punctuation\">,</span> Initialize<span class=\"token punctuation\">)</span> <span class=\"token comment\">// åé¢æ²¡åˆ†å·</span></pre></td></tr></table></figure><p>The  <code>module_name</code>  must match the filename of the final binary (excluding the  <code>.node</code>  suffix).</p>\n<p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œthe initialization function is  <code>Initialize</code>  and the addon module name is  <code>addon</code> .ï¼ˆå…ˆæ¯”ç€æŠ„å°±å®Œäº‹äº†ï¼‰</p>\n<h2 id=\"æ„å»º\"><a class=\"markdownIt-Anchor\" href=\"#æ„å»º\">#</a> æ„å»º</h2>\n<p>è¿™é‡Œä½¿ç”¨ node-gyp æ¥ç¼–è¯‘å†™å¥½çš„ C++ æˆä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ <code>addon.node</code></p>\n<p>node-gyp ä½œä¸º npm å†…ç½®çš„ä¸€éƒ¨åˆ†ï¼Œè¢«è®¾è®¡ä¸ºæ­£å¸¸æƒ…å†µä¸‹åªæœ‰åœ¨ npm install è£…ä¸€äº› node addons çš„æ—¶å€™æ‰å¯ä»¥ç”¨å†…ç½®çš„ node-gyp æ¥é’ˆå¯¹å¹³å°ç¼–è¯‘ addonï¼Œè‡ªå·±ç”¨çš„è¯éœ€è¦æ‰‹åŠ¨å®‰è£… node-gypï¼Œå‚è€ƒ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlLWd5cCNpbnN0YWxsYXRpb24=\"> github ä»“åº“</span>ã€‚</p>\n<p>å°æ’æ›²ï¼šä¸çŸ¥é“ä¸ºå•¥é‡åˆ°ä¸€å †ç½‘ç»œé—®é¢˜ï¼Œnpm, yarn, tencent éƒ½è¯•äº†ä¸€éï¼Œè¿˜æ˜¯ cnpm æœ€é¡¶ï¼ˆé¡ºå¸¦å®‰åˆ©ä¸€ä¸ªå« nrm çš„å·¥å…·ï¼Œé¡ºå¸¦åŠä¸ªæ™šä¸Šè¿›å»äº† QAQï¼‰</p>\n<p>åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªå«  <code>binding.gyp</code>  çš„é…ç½®æ–‡ä»¶ï¼Œä¾› node-gyp æ¥ç¼–è¯‘ addon</p>\n<p>binding.gypï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"targets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      <span class=\"token property\">\"target_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"addon\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token property\">\"sources\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"hello.cc\"</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// è¿™é‡Œæ³¨æ„ cc æ–‡ä»¶çš„è·¯å¾„</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ç„¶åä½¿ç”¨  <code>node-gyp configure</code>  ä¼šå‘ç°æ–°å¢äº†ä¸€ä¸ª  <code>build</code>  æ–‡ä»¶å¤¹ï¼Œè¿™è¾¹ mac å¹³å°é‡Œé¢æœ‰ä¸ª Makefileï¼Œç„¶åå†  <code>node-gyp build</code>  ä¼šå‘ç°æ–°å¢äº†  <code>build/Release/addon.node</code> ï¼Œå°±ç¼–è¯‘å®Œäº†</p>\n<h2 id=\"åœ¨nodeä¸­ä½¿ç”¨addon\"><a class=\"markdownIt-Anchor\" href=\"#åœ¨nodeä¸­ä½¿ç”¨addon\">#</a> åœ¨ node ä¸­ä½¿ç”¨ addon</h2>\n<p>ç›´æ¥åœ¨ node ä¸­ä½¿ç”¨  <code>require</code>  å³å¯å¼•å…¥åˆšåˆšç¼–è¯‘çš„æ¨¡å—ï¼ˆåƒè°ƒç”¨æ™®é€šæ¨¡å—ä¸€æ ·è°ƒç”¨äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ€ä¹ˆè¿™ä¹ˆåƒ wasmâ€¦ï¼‰</p>\n<p>hello.jsï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> addon <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./build/Release/addon'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>addon<span class=\"token punctuation\">.</span><span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// Prints: 'world'</span></pre></td></tr></table></figure><p>ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„å¯èƒ½å› ä¸ºç¼–è¯‘æ–¹å¼ä¸åŒè€Œä¸åŒï¼Œå¯ä»¥ä½¿ç”¨<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL1Rvb1RhbGxOYXRlL25vZGUtYmluZGluZ3M=\"> node-bindings</span> æ¥ç¡®å®šè¿™ä¸ªè·¯å¾„ã€‚</p>\n<pre><code class=\"language-Bash\">yarn add bindings\nimport bindings from 'bindings';\n\nconst addon = bindings('addon.node');\n\nconsole.log(addon.hello());\n</code></pre>\n<h2 id=\"ä¼ é€’å‚æ•°\"><a class=\"markdownIt-Anchor\" href=\"#ä¼ é€’å‚æ•°\">#</a> ä¼ é€’å‚æ•°</h2>\n<p>è¿˜æ˜¯å®˜ç½‘çš„ä¾‹å­ï¼š</p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL2FkZG9uLmNj\">addon.cc</span>ï¼š</p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;node.h></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">namespace</span> demo</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">using</span> v8<span class=\"token operator\">::</span>Exception<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">using</span> v8<span class=\"token operator\">::</span>FunctionCallbackInfo<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">using</span> v8<span class=\"token operator\">::</span>Isolate<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">using</span> v8<span class=\"token operator\">::</span>Local<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token keyword\">using</span> v8<span class=\"token operator\">::</span>Number<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">using</span> v8<span class=\"token operator\">::</span>Object<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">using</span> v8<span class=\"token operator\">::</span>String<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token keyword\">using</span> v8<span class=\"token operator\">::</span>Value<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token comment\">// This is the implementation of the \"add\" method</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token comment\">// Input arguments are passed using the</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token comment\">// const FunctionCallbackInfo&lt;Value>&amp; args struct</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token keyword\">void</span> <span class=\"token function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> FunctionCallbackInfo<span class=\"token operator\">&lt;</span>Value<span class=\"token operator\">></span> <span class=\"token operator\">&amp;</span>args<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    Isolate <span class=\"token operator\">*</span>isolate <span class=\"token operator\">=</span> args<span class=\"token punctuation\">.</span><span class=\"token function\">GetIsolate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token comment\">// Check the number of arguments passed.</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">.</span><span class=\"token function\">Length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token comment\">// Throw an Error that is passed back to JavaScript</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      isolate<span class=\"token operator\">-></span><span class=\"token function\">ThrowException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span><span class=\"token operator\">::</span><span class=\"token function\">TypeError</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>          <span class=\"token class-name\">String</span><span class=\"token operator\">::</span><span class=\"token function\">NewFromUtf8</span><span class=\"token punctuation\">(</span>isolate<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                              <span class=\"token string\">\"Wrong number of arguments\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>              <span class=\"token punctuation\">.</span><span class=\"token function\">ToLocalChecked</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token comment\">// Check the argument types</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-></span><span class=\"token function\">IsNumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>args<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-></span><span class=\"token function\">IsNumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>      isolate<span class=\"token operator\">-></span><span class=\"token function\">ThrowException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span><span class=\"token operator\">::</span><span class=\"token function\">TypeError</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>          <span class=\"token class-name\">String</span><span class=\"token operator\">::</span><span class=\"token function\">NewFromUtf8</span><span class=\"token punctuation\">(</span>isolate<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>                              <span class=\"token string\">\"Wrong arguments\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>              <span class=\"token punctuation\">.</span><span class=\"token function\">ToLocalChecked</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token comment\">// Perform the operation</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token keyword\">double</span> value <span class=\"token operator\">=</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>As<span class=\"token operator\">&lt;</span>Number<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">Value</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> args<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>As<span class=\"token operator\">&lt;</span>Number<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">Value</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    Local<span class=\"token operator\">&lt;</span>Number<span class=\"token operator\">></span> num <span class=\"token operator\">=</span> <span class=\"token class-name\">Number</span><span class=\"token operator\">::</span><span class=\"token function\">New</span><span class=\"token punctuation\">(</span>isolate<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token comment\">// Set the return value (using the passed in</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token comment\">// FunctionCallbackInfo&lt;Value>&amp;)</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    args<span class=\"token punctuation\">.</span><span class=\"token function\">GetReturnValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">Set</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  <span class=\"token keyword\">void</span> <span class=\"token function\">Init</span><span class=\"token punctuation\">(</span>Local<span class=\"token operator\">&lt;</span>Object<span class=\"token operator\">></span> exports<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token function\">NODE_SET_METHOD</span><span class=\"token punctuation\">(</span>exports<span class=\"token punctuation\">,</span> <span class=\"token string\">\"add\"</span><span class=\"token punctuation\">,</span> Add<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>  <span class=\"token function\">NODE_MODULE</span><span class=\"token punctuation\">(</span>NODE_GYP_MODULE_NAME<span class=\"token punctuation\">,</span> Init<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre></pre></td></tr><tr><td data-num=\"59\"></td><td><pre><span class=\"token punctuation\">&#125;</span> <span class=\"token comment\">// namespace demo</span></pre></td></tr></table></figure><h2 id=\"æ€»ç»“\"><a class=\"markdownIt-Anchor\" href=\"#æ€»ç»“\">#</a> æ€»ç»“</h2>\n<p>è¿™ä¸ªçœ‹ä¸Šå»åƒ wasm çš„ä¸œè¥¿å¤§æ¦‚ä¼˜ç‚¹å°±è·Ÿ wasm å·®ä¸å¤šå­ï¼Œèƒ½åœ¨ node é‡Œè·‘ C++ çš„è¯å¯¹æ€§èƒ½æå‡ä¸ç”¨è¯´ï¼Œè¿˜æœ‰äº› js å®ç°ä¸äº†çš„å¥‡å¥‡æ€ªæ€ªçš„æ“ä½œï¼ˆæ¯”å¦‚è·å–æŸä¸ªå˜é‡åœ¨å†…å­˜ä¸­çš„è¡¨ç¤ºå½¢å¼ qwqï¼‰</p>\n<p>é¡ºå¸¦éš”å£ deno ä»€ä¹ˆæ—¶å€™å‡ºä¸ª Rust addons å‘€</p>\n",
            "tags": [
                "C++",
                "node"
            ]
        },
        {
            "id": "https://eruihniyhbkbnf.github.io/blog/2022/08/23/%E7%BE%8E%E5%8C%96github%E9%A6%96%E9%A1%B5%E5%98%A4%EF%BD%9E/",
            "url": "https://eruihniyhbkbnf.github.io/blog/2022/08/23/%E7%BE%8E%E5%8C%96github%E9%A6%96%E9%A1%B5%E5%98%A4%EF%BD%9E/",
            "title": "ç¾åŒ–githubé¦–é¡µå˜¤ï½",
            "date_published": "2022-08-23T09:45:42.000Z",
            "content_html": "<p>é€› github å¤šäº†å°±ç»å¸¸çœ‹åˆ°å¥½å¤šäººé¦–é¡µéƒ½ç‰¹åˆ«å¥½çœ‹ï¼Œå°±å’±åªæœ‰å‡ ä¸ª pinned çš„ä»“åº“åœ¨é‚£é‡Œï¼Œæ‰“ç®—æ”¶æ‹¾ä¸€ä¸‹ä¸»é¡µ qwq</p>\n<p>Github ä¸Šæœ‰ä¸ªå« <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2FiaGlzaGVrbmFpaWR1L2F3ZXNvbWUtZ2l0aHViLXByb2ZpbGUtcmVhZG1l\">Awsome Github Profile Readme</span> çš„ä»“åº“ï¼Œå±•ç¤ºäº†å„ç§ä½¬çš„ profile é¡µï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly96emV0YW8uZ2l0aHViLmlvL2F3ZXNvbWUtZ2l0aHViLXByb2ZpbGUv\">åœ¨çº¿é¢„è§ˆ</span></p>\n<p>æ¯”å¦‚<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3RobXNnYnJ0\">è¿™ä¸ªä½¬</span>è¿™æ ·å­ï¼š</p>\n<img data-src=\"https://git.poker/ERUIHNIYHBKBNF/picapica/blob/main/misc/QQ20220823-175244.3kxt15f52720.webp?raw=true\" width=\"750px\">\n<p>çœ‹ä¸Šå»å¥½å‰å®³â€¦ å’±ä¹Ÿæ•´ä¸€ä¸ª qwq</p>\n<h2 id=\"å»ºç«‹ä¸ªäººprofileé¡µé¢\"><a class=\"markdownIt-Anchor\" href=\"#å»ºç«‹ä¸ªäººprofileé¡µé¢\">#</a> å»ºç«‹ä¸ªäºº profile é¡µé¢</h2>\n<p>æ–°å»ºä¸€ä¸ªä»“åº“è·Ÿ github ç”¨æˆ·ååŒåï¼Œä¼šçœ‹åˆ°è¿™æ ·çš„ç³»ç»Ÿæç¤ºï¼š</p>\n<blockquote>\n<p><strong>ERUIHNIYHBKBNF/ERUIHNIYHBKBNF</strong> is a special repository.</p>\n<p>Its  <code>README.md</code>  will appear on your public profile.</p>\n</blockquote>\n<p>è¿™ä¸ªä»“åº“çš„ README ä¼šè¢«å±•ç¤ºåˆ°ä¸ªäººä¸»é¡µä¸Šï¼Œè¿™æ ·å°±å¯ä»¥æ„‰å¿«åœ°å†™ä¸€ä¸ªæ¼‚äº®çš„ä¸ªäººé¡µé¢å•¦ QwQ</p>\n<h2 id=\"ä¸€äº›å¥½çœ‹çš„å°ç»„ä»¶\"><a class=\"markdownIt-Anchor\" href=\"#ä¸€äº›å¥½çœ‹çš„å°ç»„ä»¶\">#</a> ä¸€äº›å¥½çœ‹çš„å°ç»„ä»¶</h2>\n<h3 id=\"github-stats\"><a class=\"markdownIt-Anchor\" href=\"#github-stats\">#</a> github stats</h3>\n<p>å±•ç¤ºä¸ªäººçš„ github çŠ¶æ€è¯„çº§ä»€ä¹ˆçš„ï¼Œgithub å®˜æ–¹æä¾›ã€‚<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2FudXJhZ2hhenJhL2dpdGh1Yi1yZWFkbWUtc3RhdHM=\">ä»“åº“åœ°å€</span></p>\n<p>å½“ç„¶æ–¹ä¾¿ç‚¹ç›´æ¥æŠŠè¿™ä¸ªé“¾æ¥æ”¹æˆè‡ªå·±çš„ id å°±å¥½äº†ï¼ˆå…¶ä¸­åŒ…å«ä¸»é¢˜å’Œå›¾æ ‡å‚æ•°å¯ä»¥å»æ‰ï¼‰ï¼š</p>\n<pre><code class=\"language-text\">https://github-readme-stats.vercel.app/api?username=ERUIHNIYHBKBNF&amp;theme=dracula&amp;show_icons=true\n</code></pre>\n<p><img data-src=\"https://github-readme-stats.vercel.app/api?username=ERUIHNIYHBKBNF&amp;theme=dracula&amp;show_icons=true\" alt=\"\"></p>\n<h3 id=\"shieldsio\"><a class=\"markdownIt-Anchor\" href=\"#shieldsio\">#</a> <span class=\"exturl\" data-url=\"aHR0cDovL1NoaWVsZHMuaW8=\">Shields.io</span> å°å›¾æ ‡</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zaGllbGRzLmlvLw==\">ç½‘ç«™åœ°å€</span></p>\n<p>ç”¨æ¥åˆ›å»ºå°å›¾æ ‡æ¯”å¦‚è¿™æ ·ï¼š<img alt=\"TypeScript\" data-src=\"https://img.shields.io/badge/-TypeScript-3178C6?style=flat-square&logo=typescript&logoColor=white\" /></p>\n<p>å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡ä¿®æ”¹ url æ¥å®šåˆ¶å›¾æ ‡ï¼š</p>\n<pre><code class=\"language-text\">https://img.shields.io/badge/-å³ä¾§æ–‡å­—-èƒŒæ™¯é¢œè‰²?style=å¡ç‰‡æ ·å¼&amp;logo=å·¦ä¾§å›¾æ ‡åç§°&amp;logoColor=å·¦ä¾§å›¾æ ‡é¢œè‰²\næ¯”å¦‚ä¸Šé¢çš„typescriptå¡ç‰‡å°±æ˜¯è¿™ä¸ªæ ·å­ï¼š\nhttps://img.shields.io/badge/-TypeScript-3178C6?style=flat-square&amp;logo=typescript&amp;logoColor=white\nmarkdowné‡Œç›´æ¥è¿™æ ·å†™ï¼š\n&lt;img alt=&quot;TypeScript&quot; src=&quot;https://img.shields.io/badge/-TypeScript-3178C6?style=flat-square&amp;logo=typescript&amp;logoColor=white&quot; /&gt;\n</code></pre>\n<p>å…¶ä¸­å·¦ä¾§å›¾æ ‡å¯ä»¥åœ¨<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zaW1wbGVpY29ucy5vcmcv\">è¿™é‡Œ</span>æ‰¾åˆ°ã€‚</p>\n<p>ç”¨è¿™äº›å†™å‡ºæ¥çš„ä¸»é¡µçœ‹ä¸Šå»å¤§æ¦‚æ˜¯è¿™æ ·å­ï¼š</p>\n<p><img data-src=\"https://git.poker/ERUIHNIYHBKBNF/picapica/blob/main/common/QQ20220825-102943@2x.2i2qbwmetvc0.webp?raw=true\" alt=\"\"></p>\n<h2 id=\"é€šè¿‡nodeæ›´æ–°readme\"><a class=\"markdownIt-Anchor\" href=\"#é€šè¿‡nodeæ›´æ–°readme\">#</a> é€šè¿‡ node æ›´æ–° readme</h2>\n<p>é€šè¿‡ node æ¥æ›´æ–°æˆ‘ä»¬çš„ README æ–‡ä»¶ï¼Œè¿™æ ·ä¹‹åå¯ä»¥é€šè¿‡ ci æ¯éš”ä¸€æ®µæ—¶é—´çˆ¬å–ä¸ªäººåŠ¨æ€è‡ªåŠ¨æ›´æ–°ã€‚ä¸Šé¢æåˆ°çš„ä½¬ä½¿ç”¨äº† mustache æ¨¡ç‰ˆï¼Œè¿™è¾¹ç®€å•äº›ç›´æ¥å¼„å­—ç¬¦ä¸²æ›¿æ¢å¥½äº† qwq</p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3huLS1SRUFETUUtOW03aWdsNzNkdTZrNTA3YmUwaG5pbS50ZW1wbGF0ZS5tZA==\">æˆ‘ä»¬å…ˆæ–°å»ºä¸€ä¸ª README.template.md</span>ï¼Œé‡Œé¢å­˜å‚¨ä¸€äº›å›ºå®šä¿¡æ¯ï¼Œå¹¶ç”¨æ³¨é‡Šï¼ˆæˆ–è€…ä»€ä¹ˆå…¶ä»–æ ‡è¯†ï¼‰æ¥æ ‡å‡ºè¦åŠ¨æ€æ›¿æ¢çš„ä½ç½®ï¼š</p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL1JFQURNRS50ZW1wbGF0ZS5tZA==\">README.template.md</span>:</p>\n<figure class=\"highlight markdown\"><figcaption data-lang=\"markdown\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token title important\"><span class=\"token punctuation\">###</span> Hi there ğŸ‘‹</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>blablaå†™ä¸€å †å…¶ä»–å†…å®¹</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token hr punctuation\">--------</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">&lt;!-- footer --></span></pre></td></tr></table></figure><p>é¡¹ç›®ä»£ç ä¹Ÿå¾ˆç®€å•ï¼š</p>\n<p>æ ¸å¿ƒéƒ¨åˆ†ï¼Œindex.ts:</p>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> readFile<span class=\"token punctuation\">,</span> writeFile <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'fs/promises'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> getFooter <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./footer'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token constant\">TEMPLATE_PATH</span> <span class=\"token operator\">=</span> <span class=\"token string\">'README.template.md'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">const</span> readmeContent<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">[</span>ket<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  footer<span class=\"token operator\">:</span> getFooter<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">genernateReadMe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getComment</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>comment<span class=\"token operator\">:</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> readmeContent<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;!-- </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>comment<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\"> --></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">let</span> template <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">readFile</span><span class=\"token punctuation\">(</span><span class=\"token constant\">TEMPLATE_PATH</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> encoding<span class=\"token operator\">:</span> <span class=\"token string\">'utf-8'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> readmeContent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">const</span> comment <span class=\"token operator\">=</span> <span class=\"token function\">getComment</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> readmeContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    template <span class=\"token operator\">=</span> template<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>comment<span class=\"token punctuation\">,</span> content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token keyword\">await</span> <span class=\"token function\">writeFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">'README.md'</span><span class=\"token punctuation\">,</span> template<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> encoding<span class=\"token operator\">:</span> <span class=\"token string\">'utf-8'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token function\">genernateReadMe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>ç”¨äºç”Ÿæˆ footer çš„éƒ¨åˆ†ï¼Œfooter.ts:</p>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> timeZone <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./config\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'Asia/Shanghai'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getFooter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>&lt;p align=\"center\">æ­¤æ–‡ä»¶ &lt;i>README&lt;/i> &lt;b>é—´éš” 3 å°æ—¶&lt;/b>è‡ªåŠ¨åˆ·æ–°ç”Ÿæˆï¼</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>&lt;/br></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>æœ€è¿‘ä¸€æ¬¡åˆ·æ–°äºï¼š</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleString</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    timeStyle<span class=\"token operator\">:</span> <span class=\"token string\">\"medium\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    dateStyle<span class=\"token operator\">:</span> <span class=\"token string\">\"short\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    timeZone<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\"></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>&lt;/p></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å½“ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ package.json ä¸­æ·»åŠ  script æ¥ä¸€é”®ç”Ÿæˆ READMEï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"gen\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tsc &amp;&amp; node dist/index.js\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr></table></figure><h2 id=\"é€šè¿‡github-actionså®šæ—¶è‡ªåŠ¨æ›´æ–°\"><a class=\"markdownIt-Anchor\" href=\"#é€šè¿‡github-actionså®šæ—¶è‡ªåŠ¨æ›´æ–°\">#</a> é€šè¿‡ github actions å®šæ—¶è‡ªåŠ¨æ›´æ–°</h2>\n<p>åˆ›å»ºæ–‡ä»¶ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">mkdir</span> .github <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> .github <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">mkdir</span> workflows <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> workflows <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">touch</span> main.yaml</pre></td></tr></table></figure><p>ä¸‹é¢çš„æŒ‡ä»¤æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ï¼Œmain.yaml:</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> README build</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token punctuation\">-</span> master</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token key atrule\">schedule</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">cron</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'0 */3 * * *'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout current repository to master branch.</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v1</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Setup Nodejs.</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v1</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>          <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'16.x'</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Cache dependencies and build outputs to improve workflow execution time.</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/cache@v1</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>          <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> node_modules</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>          <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> $&lt;<span class=\"token tag\">!--swig</span>ï¿¼0<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">-</span>js<span class=\"token punctuation\">-</span>$&lt;<span class=\"token tag\">!--swig</span>ï¿¼1<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span><span class=\"token punctuation\">></span><span class=\"token scalar string\"></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      - name: Install dependencies</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        run: npm install -g yarn &amp;&amp; yarn</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>      - name: Generate README file</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        run: yarn gen</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      - name: Commit and Push new README.md to the repository</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        uses: mikeal/publish-to-github-action@master</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        env:</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>          GITHUB_TOKEN: $</span></pre></td></tr></table></figure><p>è¿™ä¸ª  <code>GITHUB_</code>  å¼€å¤´çš„ token ä¼¼ä¹æ˜¯è‡ªå¸¦çš„å˜é‡ qwq</p>\n<!-- ## ä½¿ç”¨Puppeteerè·å–æœ€è¿‘åŠ¨æ€ -->\n",
            "tags": [
                "æ‚é¡¹",
                "node",
                "ci/cd"
            ]
        },
        {
            "id": "https://eruihniyhbkbnf.github.io/blog/2022/05/12/typeorm-No-metadata-for-User-was-found-%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/",
            "url": "https://eruihniyhbkbnf.github.io/blog/2022/05/12/typeorm-No-metadata-for-User-was-found-%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/",
            "title": "æ–‡ä»¶è·¯å¾„é—®é¢˜ typeorm 'No metadata for User was found' è§£å†³",
            "date_published": "2022-05-12T06:47:03.000Z",
            "content_html": "<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTE1NjIxNjIvbm8tbWV0YWRhdGEtZm9yLXVzZXItd2FzLWZvdW5kLXVzaW5nLXR5cGVvcm0=\">https://stackoverflow.com/questions/51562162/no-metadata-for-user-was-found-using-typeorm</span></p>\n<h2 id=\"é—®é¢˜æè¿°\"><a class=\"markdownIt-Anchor\" href=\"#é—®é¢˜æè¿°\">#</a> é—®é¢˜æè¿°</h2>\n<p>é—®é¢˜æ¥è‡ªä¸€ä¸ª typeorm çš„ dataSource é…ç½®ï¼š</p>\n<figure class=\"highlight typescript\"><figcaption data-lang=\"typescript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> dataSource <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DataSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mysql\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  host<span class=\"token operator\">:</span> <span class=\"token constant\">MYSQL_HOST</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  port<span class=\"token operator\">:</span> <span class=\"token function\">Number</span><span class=\"token punctuation\">(</span><span class=\"token constant\">MYSQL_PROT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  username<span class=\"token operator\">:</span> <span class=\"token constant\">MYSQL_USER</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  password<span class=\"token operator\">:</span> <span class=\"token constant\">MYSQL_PWD</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  database<span class=\"token operator\">:</span> <span class=\"token constant\">MYSQL_DB</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  synchronize<span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"development\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  entities<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/entity/*.ts\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>å¼€å‘ç¯å¢ƒæ­£å¸¸ï¼Œç”Ÿäº§ç¯å¢ƒæŠ¥é”™ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>******<span class=\"token punctuation\">\\</span>src<span class=\"token punctuation\">\\</span>entity<span class=\"token punctuation\">\\</span>user.ts:1</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">import</span> <span class=\"token punctuation\">&#123;</span> Entity, Column, PrimaryGeneratedColumn, CreateDateColumn, UpdateDateColumn, DeleteDateColumn <span class=\"token punctuation\">&#125;</span> from <span class=\"token string\">'typeorm'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>^^^^^^</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>SyntaxError: Cannot use <span class=\"token function\">import</span> statement outside a module</pre></td></tr></table></figure><p>èœœæ±è°ƒç”¨äº† ts æ–‡ä»¶ã€‚</p>\n<h2 id=\"è§£å†³\"><a class=\"markdownIt-Anchor\" href=\"#è§£å†³\">#</a> è§£å†³</h2>\n<p>entities è·¯å¾„æŒ‡å‘äº†æœªè¢«ç¼–è¯‘çš„ ts æ–‡ä»¶ï¼Œé¡ºå¸¦å¦‚æœè·¯å¾„å†™é”™çš„è¯å°±ä¼šå‡ºç° â€œNo metadata for User was foundâ€ çš„æŠ¥é”™ã€‚</p>\n<p><code>__dirname</code>  æŒ‡å‘å½“å‰æ¨¡å—çš„è·¯å¾„ã€‚</p>\n<p>æ”¹ä¸€ä¸‹å°±å¥½äº†ï¼š</p>\n<figure class=\"highlight typescript\"><figcaption data-lang=\"typescript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> dataSource <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DataSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mysql\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  host<span class=\"token operator\">:</span> <span class=\"token constant\">MYSQL_HOST</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  port<span class=\"token operator\">:</span> <span class=\"token function\">Number</span><span class=\"token punctuation\">(</span><span class=\"token constant\">MYSQL_PROT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  username<span class=\"token operator\">:</span> <span class=\"token constant\">MYSQL_USER</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  password<span class=\"token operator\">:</span> <span class=\"token constant\">MYSQL_PWD</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  database<span class=\"token operator\">:</span> <span class=\"token constant\">MYSQL_DB</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  synchronize<span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"development\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  entities<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>__dirname <span class=\"token operator\">+</span> <span class=\"token string\">\"/../entity/**/*.js\"</span><span class=\"token punctuation\">,</span> __dirname <span class=\"token operator\">+</span> <span class=\"token string\">\"/../entity/**/*.ts\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>æ‰å‘ç°è‡ªå·±åŸæ¥æ ¹æœ¬ä¸ç†è§£è¿™ä¸ªè·¯å¾„çš„æ„æ€ qwq</p>\n",
            "tags": [
                "å‰ç«¯",
                "node",
                "typeorm"
            ]
        }
    ]
}