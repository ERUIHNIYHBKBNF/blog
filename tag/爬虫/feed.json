{
    "version": "https://jsonfeed.org/version/1",
    "title": "Eruの兔叽窝 • All posts by \"爬虫\" tag",
    "description": "嘤嘤嘤~",
    "home_page_url": "https://eruihniyhbkbnf.github.io/blog",
    "items": [
        {
            "id": "https://eruihniyhbkbnf.github.io/blog/2021/06/07/%E6%9F%A5%E8%AF%A2md5%E7%88%AC%E8%99%AB%E5%AE%9E%E4%BE%8B/",
            "url": "https://eruihniyhbkbnf.github.io/blog/2021/06/07/%E6%9F%A5%E8%AF%A2md5%E7%88%AC%E8%99%AB%E5%AE%9E%E4%BE%8B/",
            "title": "[杂项] py查询md5爬虫&简单excel处理",
            "date_published": "2021-06-07T02:30:35.000Z",
            "content_html": "<h2 id=\"背景\"><a class=\"markdownIt-Anchor\" href=\"#背景\">#</a> 背景</h2>\n<p>报名了学校 &quot;2021 小学期网络攻防实践创新课程&quot;，然后这样公布了名单。。</p>\n<img data-src=\"https://z3.ax1x.com/2021/06/07/2dyBz6.png\" width=\"500px\">\n<p>该说不愧是搞安全的ヘ (_ _ヘ)，<s>攻防开始</s>。拿一堆 md5 加密过的东西放上去，倒是能查到自己的，不过还有点好奇同专业的同学还有谁选上这门课了，写个爬虫玩玩。</p>\n<blockquote>\n<p>md5: 一种不可逆的加密算法</p>\n</blockquote>\n<h2 id=\"思路\"><a class=\"markdownIt-Anchor\" href=\"#思路\">#</a> 思路</h2>\n<p>目前手中的资料有：</p>\n<ul>\n<li>全专业同学的学号与姓名名单</li>\n<li>入选同学的学号姓名（上图，加密过的）</li>\n<li>随手找的一个 md5 加密网站：<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucXZkdi5jb20vdG9vbHMvcXZkdi1tZDU=\">https://www.qvdv.com/tools/qvdv-md5</span>  顺带 api 是：<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucXZkdi5jb20vdG9vbHMvcXZkdi1tZDUtX2luZGV4Lmh0bWw=\">https://www.qvdv.com/tools/qvdv-md5-_index.html</span></li>\n</ul>\n<p>打算拿学号那一栏去对比。查询每个人学号加密后的结果，如果在入选名单中出现就是被选上啦，，</p>\n<p>具体请求方式是这样的，POST 加上 form 参数：</p>\n<img data-src=\"https://z3.ax1x.com/2021/06/07/2dgdij.png\" width=\"500px\">\n<h2 id=\"代码实现\"><a class=\"markdownIt-Anchor\" href=\"#代码实现\">#</a> 代码实现</h2>\n<p>大部分时间花在了 excel 表格的处理上，不太会玩 QAQ</p>\n<p>提前准备了 全部人员信息表格  <code>total.xlsx</code>  ，通过人员 md5 加密的表格  <code>pass.xlsx</code></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> requests <span class=\"token keyword\">as</span> rq</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> bs4 <span class=\"token keyword\">import</span> BeautifulSoup</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> json</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> csv</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">from</span> openpyxl <span class=\"token keyword\">import</span> load_workbook <span class=\"token keyword\">as</span> readxl</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">from</span> openpyxl <span class=\"token keyword\">import</span> Workbook</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">#设置要爬取的 url</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>url <span class=\"token operator\">=</span> <span class=\"token string\">\"https://www.qvdv.com/tools/qvdv-md5-_index.html\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">#读取全部信息表格，第一个工作表</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>table <span class=\"token operator\">=</span> readxl<span class=\"token punctuation\">(</span><span class=\"token string\">'./total.xlsx'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>totSheet <span class=\"token operator\">=</span> table<span class=\"token punctuation\">.</span>worksheets<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">#print(totSheet[1][1].value)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">#读取通过者名单表格</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>table <span class=\"token operator\">=</span> readxl<span class=\"token punctuation\">(</span><span class=\"token string\">'./pass.xlsx'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>passSheet <span class=\"token operator\">=</span> table<span class=\"token punctuation\">.</span>worksheets<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">#稍微打包一下方便查找</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>passerMd5 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">for</span> passer <span class=\"token keyword\">in</span> passSheet<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  passerMd5<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>passer<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\">#准备输出到这里</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\">#创建一个 Workbook 对象</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>wb <span class=\"token operator\">=</span> Workbook<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\">#新建一张表</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>wb<span class=\"token punctuation\">.</span>create_sheet<span class=\"token punctuation\">(</span><span class=\"token string\">\"sheet1\"</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\"># 获取当前活跃的 sheet，默认为第一张 sheet</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>table <span class=\"token operator\">=</span> wb<span class=\"token punctuation\">.</span>active</pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token comment\">#tot 记录总人数，顺带当作表格的索引，顺带这个是从 1 开始计数的</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>tot <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token comment\">#循环所有人名单查找通过者</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token keyword\">for</span> stu <span class=\"token keyword\">in</span> totSheet<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token comment\">#打包要 post 的 form 数据</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  data <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token comment\">#这里通过学号的 md5 来找</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  <span class=\"token string\">\"code\"</span><span class=\"token punctuation\">:</span> stu<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>  <span class=\"token string\">\"codeType\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"x32\"</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  <span class=\"token comment\">#post 请求获取 md5 值</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>  res <span class=\"token operator\">=</span> rq<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  <span class=\"token comment\">#返回一个字符串，转成 json 再找 data 就是学号对应的 md5 值</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>  md5Value <span class=\"token operator\">=</span> json<span class=\"token punctuation\">.</span>loads<span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"data\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>  <span class=\"token comment\">#当前对象在通过名单中，加入表格</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>md5Value <span class=\"token keyword\">in</span> passerMd5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    table<span class=\"token punctuation\">.</span>cell<span class=\"token punctuation\">(</span>tot<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> stu<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    table<span class=\"token punctuation\">.</span>cell<span class=\"token punctuation\">(</span>tot<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> stu<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    tot <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token comment\">#保存表格</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>wb<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token string\">\"passers.xlsx\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure>",
            "tags": [
                "杂项",
                "python",
                "爬虫"
            ]
        },
        {
            "id": "https://eruihniyhbkbnf.github.io/blog/2021/01/18/%E5%88%9D%E6%8E%A2BeautifulSoup%E5%BA%93/",
            "url": "https://eruihniyhbkbnf.github.io/blog/2021/01/18/%E5%88%9D%E6%8E%A2BeautifulSoup%E5%BA%93/",
            "title": "[爬虫笔记] 初探BeautifulSoup库",
            "date_published": "2021-01-18T01:52:35.000Z",
            "content_html": "<blockquote>\n<p>Soup 是汤啊… 咱还以为是肥皂 qwq</p>\n</blockquote>\n<h2 id=\"基本使用\"><a class=\"markdownIt-Anchor\" href=\"#基本使用\">#</a> 基本使用</h2>\n<p>beautifulsoup 类， html 文档， 标签树 (字符串) 认为等价。</p>\n<p><strong>bs4 库将所有读入的 html 文件和字符串都转化为 UTF-8 编码</strong></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># pip install beautifulsoup4</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> bs4 <span class=\"token keyword\">import</span> BeautifulSoup <span class=\"token comment\"># 注意大小写</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>soup <span class=\"token operator\">=</span> BeautifulSoup<span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;html>data&lt;/html>\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'html.parser'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 需要解析的 html 信息，解析器</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>soup <span class=\"token operator\">=</span> BeautifulSoup<span class=\"token punctuation\">(</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"D://demo.html\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'html.parser'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><table>\n<thead>\n<tr>\n<th>解析器</th>\n<th>使用方法</th>\n<th>条件</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>bs4 的 html 解析器</td>\n<td>“html.parser”</td>\n<td>bs4 库</td>\n</tr>\n<tr>\n<td>lxml 的 html 解析器</td>\n<td>“lxml”</td>\n<td>pip install lxml</td>\n</tr>\n<tr>\n<td>lxml 的 xml 解析器</td>\n<td>“xml”</td>\n<td>pip install lxml</td>\n</tr>\n<tr>\n<td>html5lib 的解析器</td>\n<td>“html5lib”</td>\n<td>pip install html5lib</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>基本元素</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Tag</td>\n<td>标签  soup.&lt;tag&gt; # 多个相同标签，优先返回首个。</td>\n</tr>\n<tr>\n<td>Name</td>\n<td>标签名 &lt;tag&gt;.name</td>\n</tr>\n<tr>\n<td>Attributes</td>\n<td>标签属性，字典形式 &lt;tag&gt;.attrs</td>\n</tr>\n<tr>\n<td>NavigableString</td>\n<td>非属性字符串 &lt;tag&gt;.string</td>\n</tr>\n<tr>\n<td>Comment</td>\n<td>注释</td>\n</tr>\n</tbody>\n</table>\n<p>实例：</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">from</span> bs4 <span class=\"token keyword\">import</span> BeautifulSoup</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> soup <span class=\"token operator\">=</span> BeautifulSoup<span class=\"token punctuation\">(</span>demo<span class=\"token punctuation\">,</span> <span class=\"token string\">\"html.parser\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#demo 是一个 html 文档 (字符串) 通过 demo = get (\"https://python123.io/ws/demo.html\").text</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> tag <span class=\"token operator\">=</span> soup<span class=\"token punctuation\">.</span>a</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> tag<span class=\"token punctuation\">.</span>name</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token string\">'a'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> tag<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">.</span>name</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token string\">'p'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> tag<span class=\"token punctuation\">.</span>attrs</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'href'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'http://www.icourse163.org/course/BIT-268001'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'py1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'link1'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> tag<span class=\"token punctuation\">.</span>attrs<span class=\"token punctuation\">[</span><span class=\"token string\">'href'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token string\">'http://www.icourse163.org/course/BIT-268001'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">.</span>attrs<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token keyword\">class</span> <span class=\"token string\">'dict'</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token keyword\">class</span> <span class=\"token string\">'bs4.element.Tag'</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> tag<span class=\"token punctuation\">.</span>string</pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token string\">'Basic Python'</span></pre></td></tr></table></figure><h2 id=\"遍历html\"><a class=\"markdownIt-Anchor\" href=\"#遍历html\">#</a> 遍历 HTML</h2>\n<blockquote>\n<p>才知道 html 竟然可以看成标签树形结构 qwq</p>\n</blockquote>\n<p>遍历方式： 上行遍历 (fa -&gt; son)，下行遍历 (son -&gt; fa)，平行遍历 (<strong>同父亲的</strong> son 之间，不是同深度的所有节点)</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>.contents</td>\n<td>子节点的列表，包含所有儿子节点</td>\n</tr>\n<tr>\n<td>.children</td>\n<td>子节点的迭代类型，用于循环遍历儿子</td>\n</tr>\n<tr>\n<td>.descendants</td>\n<td>子孙节点的迭代类型，包含所有子孙节点</td>\n</tr>\n<tr>\n<td>.parent</td>\n<td>父亲节点标签</td>\n</tr>\n<tr>\n<td>.parents</td>\n<td>先辈标签的迭代类型，用于循环遍历先辈节点</td>\n</tr>\n<tr>\n<td>.next_sibling</td>\n<td>返回 html 文本顺序的下一个平行节点标签</td>\n</tr>\n<tr>\n<td>.previous_sibling</td>\n<td>上一个平行节点标签</td>\n</tr>\n<tr>\n<td>.next_siblings</td>\n<td>迭代类型，后续所有平行节点标签</td>\n</tr>\n<tr>\n<td>.previous_siblings</td>\n<td>迭代类型，前驱所有平行节点标签</td>\n</tr>\n</tbody>\n</table>\n<img data-src=\"https://s3.ax1x.com/2020/12/09/rPnRgK.jpg\" width=\"500px\">\n<p>下行遍历：</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> soup <span class=\"token operator\">=</span> BeautifulSoup<span class=\"token punctuation\">(</span>demo<span class=\"token punctuation\">,</span> <span class=\"token string\">\"html.parser\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> soup<span class=\"token punctuation\">.</span>head</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">&lt;</span>head<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>title<span class=\"token operator\">></span>This <span class=\"token keyword\">is</span> a python demo page<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>title<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>head<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> soup<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">.</span>contents</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span>title<span class=\"token operator\">></span>This <span class=\"token keyword\">is</span> a python demo page<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>title<span class=\"token operator\">></span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> soup<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>contents<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token operator\">&lt;</span>p <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"title\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>b<span class=\"token operator\">></span>The demo python introduces several python courses<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>b<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># 遍历儿子</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">for</span> child <span class=\"token keyword\">in</span> soup<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>上行遍历：（接上段）</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> soup<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">.</span>parent</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">&lt;</span>head<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>title<span class=\"token operator\">></span>This <span class=\"token keyword\">is</span> a python demo page<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>title<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>head<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> soup<span class=\"token punctuation\">.</span>html<span class=\"token punctuation\">.</span>parent</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 打印了整个 html 文档</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> soup<span class=\"token punctuation\">.</span>parent</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># 空</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 遍历父亲</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">for</span> parent <span class=\"token keyword\">in</span> soup<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">.</span>parents<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">if</span> parent <span class=\"token keyword\">is</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>平行遍历：（接上段）</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> soup<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">.</span>next_sibling</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token string\">' and '</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> soup<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">.</span>next_sibling<span class=\"token punctuation\">.</span>next_sibling</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">&lt;</span>a <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"py2\"</span> href<span class=\"token operator\">=</span><span class=\"token string\">\"http://www.icourse163.org/course/BIT-1001870001\"</span> <span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token string\">\"link2\"</span><span class=\"token operator\">></span>Advanced Python<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> soup<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">.</span>previous_sibling</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token string\">'Python is a wonderful general-purpose programming language. You can learn Python from novice to professional by tracking the following courses:\\r\\n'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> soup<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">.</span>previous_sibling<span class=\"token punctuation\">.</span>previous_sibling</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># 空</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># 遍历同上 qwq</span></pre></td></tr></table></figure><h2 id=\"html格式输出\"><a class=\"markdownIt-Anchor\" href=\"#html格式输出\">#</a> HTML 格式输出</h2>\n<blockquote>\n<p>如何让 html 页面更加 &quot;友好&quot; 地显示</p>\n</blockquote>\n<h3 id=\"bs4库的pretify方法\"><a class=\"markdownIt-Anchor\" href=\"#bs4库的pretify方法\">#</a> bs4 库的 pretify () 方法</h3>\n<p>使用方法： <code>soup.prettify() # 添加空格和换行符用于打印</code></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>soup<span class=\"token punctuation\">.</span>prettify<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">&lt;</span>html<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre> <span class=\"token operator\">&lt;</span>head<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token comment\"># 省略掉防止占篇幅 qwq</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre> <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>head<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre> <span class=\"token operator\">&lt;</span>body<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token comment\"># 省略掉防止占篇幅 qwq</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre> <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>html<span class=\"token operator\">></span></pre></td></tr></table></figure><h2 id=\"实例提取html中所有链接\"><a class=\"markdownIt-Anchor\" href=\"#实例提取html中所有链接\">#</a> 实例：提取 HTML 中所有链接</h2>\n<ol>\n<li>找到所有 &lt;a&gt; 标签</li>\n<li>提取所有 href 后内容</li>\n</ol>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">import</span> requests <span class=\"token keyword\">as</span> rq</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">from</span> bs4 <span class=\"token keyword\">import</span> BeautifulSoup</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> url <span class=\"token operator\">=</span><span class=\"token string\">\"https://python123.io/ws/demo.html\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> r <span class=\"token operator\">=</span> rq<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> demo <span class=\"token operator\">=</span> r<span class=\"token punctuation\">.</span>text</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> soup <span class=\"token operator\">=</span> BeautifulSoup<span class=\"token punctuation\">(</span>demo<span class=\"token punctuation\">,</span> <span class=\"token string\">\"html.parser\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">for</span> link <span class=\"token keyword\">in</span> soup<span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>link<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'href'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>http<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>www<span class=\"token punctuation\">.</span>icourse163<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>course<span class=\"token operator\">/</span>BIT<span class=\"token operator\">-</span><span class=\"token number\">268001</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>http<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>www<span class=\"token punctuation\">.</span>icourse163<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>course<span class=\"token operator\">/</span>BIT<span class=\"token operator\">-</span><span class=\"token number\">1001870001</span></pre></td></tr></table></figure>",
            "tags": [
                "python",
                "爬虫"
            ]
        }
    ]
}