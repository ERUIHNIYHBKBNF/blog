---
title: ç¾åŒ–githubé¦–é¡µå˜¤ï½
date: 2022-08-23 17:45:42
tags: [æ‚é¡¹, node, ci/cd]
---

é€›githubå¤šäº†å°±ç»å¸¸çœ‹åˆ°å¥½å¤šäººé¦–é¡µéƒ½ç‰¹åˆ«å¥½çœ‹ï¼Œå°±å’±åªæœ‰å‡ ä¸ªpinnedçš„ä»“åº“åœ¨é‚£é‡Œï¼Œæ‰“ç®—æ”¶æ‹¾ä¸€ä¸‹ä¸»é¡µqwq

Githubä¸Šæœ‰ä¸ªå« [Awsome Github Profile Readme](https://github.com/abhisheknaiidu/awesome-github-profile-readme) çš„ä»“åº“ï¼Œå±•ç¤ºäº†å„ç§ä½¬çš„profileé¡µï¼š[åœ¨çº¿é¢„è§ˆ](https://zzetao.github.io/awesome-github-profile/)

æ¯”å¦‚[è¿™ä¸ªä½¬](https://github.com/thmsgbrt)è¿™æ ·å­ï¼š

<img src="https://git.poker/ERUIHNIYHBKBNF/picapica/blob/main/misc/QQ20220823-175244.3kxt15f52720.webp?raw=true" width="750px">

çœ‹ä¸Šå»å¥½å‰å®³..å’±ä¹Ÿæ•´ä¸€ä¸ªqwq

## å»ºç«‹ä¸ªäººprofileé¡µé¢

æ–°å»ºä¸€ä¸ªä»“åº“è·Ÿgithubç”¨æˆ·ååŒåï¼Œä¼šçœ‹åˆ°è¿™æ ·çš„ç³»ç»Ÿæç¤ºï¼š

> **ERUIHNIYHBKBNF/ERUIHNIYHBKBNF** is a special repository.
>
> Its `README.md` will appear on your public profile.

è¿™ä¸ªä»“åº“çš„READMEä¼šè¢«å±•ç¤ºåˆ°ä¸ªäººä¸»é¡µä¸Šï¼Œè¿™æ ·å°±å¯ä»¥æ„‰å¿«åœ°å†™ä¸€ä¸ªæ¼‚äº®çš„ä¸ªäººé¡µé¢å•¦QwQ

## ä¸€äº›å¥½çœ‹çš„å°ç»„ä»¶

### github stats

å±•ç¤ºä¸ªäººçš„githubçŠ¶æ€è¯„çº§ä»€ä¹ˆçš„ï¼Œgithubå®˜æ–¹æä¾›ã€‚[ä»“åº“åœ°å€](https://github.com/anuraghazra/github-readme-stats)

å½“ç„¶æ–¹ä¾¿ç‚¹ç›´æ¥æŠŠè¿™ä¸ªé“¾æ¥æ”¹æˆè‡ªå·±çš„idå°±å¥½äº†ï¼ˆå…¶ä¸­åŒ…å«ä¸»é¢˜å’Œå›¾æ ‡å‚æ•°å¯ä»¥å»æ‰ï¼‰ï¼š

```text
https://github-readme-stats.vercel.app/api?username=ERUIHNIYHBKBNF&theme=dracula&show_icons=true
```

![](https://github-readme-stats.vercel.app/api?username=ERUIHNIYHBKBNF&theme=dracula&show_icons=true)

### Shields.io å°å›¾æ ‡

[ç½‘ç«™åœ°å€](https://shields.io/)

ç”¨æ¥åˆ›å»ºå°å›¾æ ‡æ¯”å¦‚è¿™æ ·ï¼š<img alt="TypeScript" src="https://img.shields.io/badge/-TypeScript-3178C6?style=flat-square&logo=typescript&logoColor=white" />

å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡ä¿®æ”¹urlæ¥å®šåˆ¶å›¾æ ‡ï¼š

```text
https://img.shields.io/badge/-å³ä¾§æ–‡å­—-èƒŒæ™¯é¢œè‰²?style=å¡ç‰‡æ ·å¼&logo=å·¦ä¾§å›¾æ ‡åç§°&logoColor=å·¦ä¾§å›¾æ ‡é¢œè‰²
æ¯”å¦‚ä¸Šé¢çš„typescriptå¡ç‰‡å°±æ˜¯è¿™ä¸ªæ ·å­ï¼š
https://img.shields.io/badge/-TypeScript-3178C6?style=flat-square&logo=typescript&logoColor=white
markdowné‡Œç›´æ¥è¿™æ ·å†™ï¼š
<img alt="TypeScript" src="https://img.shields.io/badge/-TypeScript-3178C6?style=flat-square&logo=typescript&logoColor=white" />
```

å…¶ä¸­å·¦ä¾§å›¾æ ‡å¯ä»¥åœ¨[è¿™é‡Œ](https://simpleicons.org/)æ‰¾åˆ°ã€‚

ç”¨è¿™äº›å†™å‡ºæ¥çš„ä¸»é¡µçœ‹ä¸Šå»å¤§æ¦‚æ˜¯è¿™æ ·å­ï¼š

![](https://git.poker/ERUIHNIYHBKBNF/picapica/blob/main/common/QQ20220825-102943@2x.2i2qbwmetvc0.webp?raw=true)

## é€šè¿‡nodeæ›´æ–°readme

é€šè¿‡nodeæ¥æ›´æ–°æˆ‘ä»¬çš„READMEæ–‡ä»¶ï¼Œè¿™æ ·ä¹‹åå¯ä»¥é€šè¿‡ciæ¯éš”ä¸€æ®µæ—¶é—´çˆ¬å–ä¸ªäººåŠ¨æ€è‡ªåŠ¨æ›´æ–°ã€‚ä¸Šé¢æåˆ°çš„ä½¬ä½¿ç”¨äº†mustacheæ¨¡ç‰ˆï¼Œè¿™è¾¹ç®€å•äº›ç›´æ¥å¼„å­—ç¬¦ä¸²æ›¿æ¢å¥½äº†qwq

æˆ‘ä»¬å…ˆæ–°å»ºä¸€ä¸ªREADME.template.mdï¼Œé‡Œé¢å­˜å‚¨ä¸€äº›å›ºå®šä¿¡æ¯ï¼Œå¹¶ç”¨æ³¨é‡Šï¼ˆæˆ–è€…ä»€ä¹ˆå…¶ä»–æ ‡è¯†ï¼‰æ¥æ ‡å‡ºè¦åŠ¨æ€æ›¿æ¢çš„ä½ç½®ï¼š

README.template.md:

```markdown
### Hi there ğŸ‘‹

blablaå†™ä¸€å †å…¶ä»–å†…å®¹

--------
<!-- footer -->
```

é¡¹ç›®ä»£ç ä¹Ÿå¾ˆç®€å•ï¼š

æ ¸å¿ƒéƒ¨åˆ†ï¼Œindex.ts:

```ts
import { readFile, writeFile } from 'fs/promises';
import { getFooter } from './footer';
const TEMPLATE_PATH = 'README.template.md';

const readmeContent: {[ket: string]: Function} = {
  footer: getFooter,
};

async function genernateReadMe() {
  const getComment = (comment: keyof typeof readmeContent) => `<!-- ${comment} -->`; 
  let template = await readFile(TEMPLATE_PATH, { encoding: 'utf-8' });

  for (const key in readmeContent) {
    const comment = getComment(key);
    const content = await readmeContent[key]();
    template = template.replace(comment, content);
  }

  await writeFile('README.md', template, { encoding: 'utf-8' });
}

genernateReadMe();
```

ç”¨äºç”Ÿæˆfooterçš„éƒ¨åˆ†ï¼Œfooter.ts:

```ts
import { timeZone } from "./config"; // 'Asia/Shanghai'

export async function getFooter() {
  return `
<p align="center">æ­¤æ–‡ä»¶ <i>README</i> <b>é—´éš” 3 å°æ—¶</b>è‡ªåŠ¨åˆ·æ–°ç”Ÿæˆï¼
</br>
æœ€è¿‘ä¸€æ¬¡åˆ·æ–°äºï¼š${new Date().toLocaleString(undefined, {
    timeStyle: "medium",
    dateStyle: "short",
    timeZone,
  })}
</p>
  `;
}
```

å½“ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨package.jsonä¸­æ·»åŠ scriptæ¥ä¸€é”®ç”ŸæˆREADMEï¼š

```json
"scripts": {
  "gen": "tsc && node dist/index.js"
},
```

## é€šè¿‡github actionså®šæ—¶è‡ªåŠ¨æ›´æ–°

åˆ›å»ºæ–‡ä»¶ï¼š

```bash
mkdir .github && cd .github && mkdir workflows && cd workflows && touch main.yaml
```

ä¸‹é¢çš„æŒ‡ä»¤æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ï¼Œmain.yaml:

```yaml
name: README build

on:
  push:
    branches:
      - master
  schedule:
    - cron: '0 */3 * * *'

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout current repository to master branch.
        uses: actions/checkout@v1
      - name: Setup Nodejs.
        uses: actions/setup-node@v1
        with:
          node-version: '16.x'
      - name: Cache dependencies and build outputs to improve workflow execution time.
        uses: actions/cache@v1
        with:
          path: node_modules
          key: ${{ runner.os }}-js-${{ hashFiles('yarn.lock') }}
      - name: Install dependencies
        run: npm install -g yarn && yarn
      - name: Generate README file
        run: yarn gen
      - name: Commit and Push new README.md to the repository
        uses: mikeal/publish-to-github-action@master
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

è¿™ä¸ª `GITHUB_` å¼€å¤´çš„tokenä¼¼ä¹æ˜¯è‡ªå¸¦çš„å˜é‡qwq

<!-- ## ä½¿ç”¨Puppeteerè·å–æœ€è¿‘åŠ¨æ€ -->
